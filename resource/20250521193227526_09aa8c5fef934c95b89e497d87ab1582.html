<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>信号调制技术 - 通信原理</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');
        
        :root {
            --primary-color: #3b82f6;
            --secondary-color: #6366f1;
            --accent-color: #8b5cf6;
            --light-bg: #ffffff;
            --dark-bg: #1f2937;
            --light-text: #374151;
            --dark-text: #f3f4f6;
            --light-card: #f9fafb;
            --dark-card: #2d3748;
        }

        body {
            font-family: 'Noto Sans SC', sans-serif;
            transition: background-color 0.3s, color 0.3s;
            scroll-behavior: smooth;
        }

        .animate-fade-in {
            animation: fadeIn 1s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-hover {
            transition: all 0.3s ease;
        }

        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* 自定义滚动条 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #c5c5c5;
            border-radius: 4px;
        }

        /* 深色模式下的滚动条 */
        .dark ::-webkit-scrollbar-track {
            background: #374151;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #6b7280;
        }

        /* 图表部分的样式 */
        .chart-container {
            position: relative;
            margin: auto;
            height: 300px;
            width: 100%;
        }
    </style>
</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 transition-colors duration-300">
    <header class="sticky top-0 z-50 backdrop-blur-md bg-white/70 dark:bg-gray-900/70 shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fas fa-signal text-blue-600 dark:text-blue-400 text-2xl mr-3"></i>
                <h1 class="text-xl md:text-2xl font-bold">通信原理</h1>
            </div>
            <div class="flex items-center space-x-4">
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                    <i class="fas fa-sun text-yellow-500 dark:hidden"></i>
                    <i class="fas fa-moon text-blue-300 hidden dark:block"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-5xl">
        <!-- 课程标题部分 -->
        <div class="mb-16 animate-fade-in">
            <h1 class="text-4xl md:text-5xl font-bold text-center mb-4 text-blue-600 dark:text-blue-400">信号调制技术</h1>
            <p class="text-center text-gray-600 dark:text-gray-400 text-xl">现代通信系统的核心技术</p>
            <div class="flex justify-center mt-6">
                <div class="h-1 w-24 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full"></div>
            </div>
        </div>

        <!-- 导航卡片 -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-16 animate-fade-in" style="animation-delay: 0.2s;">
            <div class="card-hover bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-lg shadow-md text-center">
                <div class="bg-blue-500 dark:bg-blue-600 text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-wave-square text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2">幅度调制</h3>
                <p class="text-gray-600 dark:text-gray-300">改变载波信号的振幅来传输信息</p>
                <a href="#amplitude-modulation" class="mt-4 inline-block text-blue-600 dark:text-blue-400 hover:underline">了解详情 →</a>
            </div>
            
            <div class="card-hover bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-lg shadow-md text-center">
                <div class="bg-purple-500 dark:bg-purple-600 text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-stream text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2">频率调制</h3>
                <p class="text-gray-600 dark:text-gray-300">改变载波信号的频率来传输信息</p>
                <a href="#frequency-modulation" class="mt-4 inline-block text-purple-600 dark:text-purple-400 hover:underline">了解详情 →</a>
            </div>
            
            <div class="card-hover bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-lg shadow-md text-center">
                <div class="bg-indigo-500 dark:bg-indigo-600 text-white w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-circle-notch text-2xl"></i>
                </div>
                <h3 class="text-xl font-semibold mb-2">相位调制</h3>
                <p class="text-gray-600 dark:text-gray-300">改变载波信号的相位来传输信息</p>
                <a href="#phase-modulation" class="mt-4 inline-block text-indigo-600 dark:text-indigo-400 hover:underline">了解详情 →</a>
            </div>
        </div>

        <!-- 调制概念 -->
        <section class="mb-16 animate-fade-in" style="animation-delay: 0.3s;">
            <div class="bg-gray-50 dark:bg-gray-800/50 p-6 rounded-lg shadow-md">
                <h2 class="text-2xl font-bold mb-6 flex items-center">
                    <i class="fas fa-question-circle text-blue-500 dark:text-blue-400 mr-3"></i>
                    什么是信号调制？为什么需要调制？
                </h2>
                <div class="space-y-4">
                    <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                        信号调制是指根据待传输的信息信号（调制信号），按照一定的规律改变载波信号某一参数（振幅、频率或相位）的过程。调制的主要目的是将信息信号转换为适合在特定信道中传输的形式。
                    </p>
                    <div class="bg-white dark:bg-gray-700 p-4 rounded-md border-l-4 border-blue-500">
                        <p class="font-medium mb-2">我们为什么需要调制？</p>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>提高天线辐射效率（基带信号频率较低，天线尺寸过大）</li>
                            <li>减小天线尺寸（载波频率较高，可使用尺寸合理的天线）</li>
                            <li>实现频分复用（不同信道使用不同频段，提高频谱利用率）</li>
                            <li>克服传输环境限制（某些介质对特定频段的信号传输特性更好）</li>
                            <li>减少干扰（调制可以将信号能量集中在特定频带上）</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-8">
                    <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 p-4 rounded-lg">
                        <h3 class="text-lg font-semibold mb-3">调制的数学表达</h3>
                        <p class="mb-4">一般地，载波信号可表示为：</p>
                        <p class="text-center mb-4" id="carrier-formula">c(t) = A_c\cos(2\pi f_c t + \phi_c)</p>
                        <p class="mb-2">其中：</p>
                        <ul class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">A<sub>c</sub></span>: 载波振幅</li>
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">f<sub>c</sub></span>: 载波频率</li>
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">φ<sub>c</sub></span>: 载波初相位</li>
                        </ul>
                        <p class="mt-4">调制就是根据调制信号m(t)改变载波的三个参数（A<sub>c</sub>、f<sub>c</sub>或φ<sub>c</sub>）中的一个或多个。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 幅度调制 -->
        <section id="amplitude-modulation" class="mb-16 animate-fade-in scroll-mt-24" style="animation-delay: 0.4s;">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-md">
                <h2 class="text-3xl font-bold mb-6 text-blue-600 dark:text-blue-400">幅度调制 (AM)</h2>
                
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">原理与数学表达</h3>
                    <p class="mb-4">幅度调制是指根据调制信号m(t)的变化来改变载波幅度的调制方式。</p>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg mb-6">
                        <p class="font-medium mb-3">标准AM调制信号可表示为：</p>
                        <p class="text-center mb-4" id="am-formula">s_{AM}(t) = A_c[1 + \mu_a m(t)]\cos(2\pi f_c t)</p>
                        <p class="mb-2">其中：</p>
                        <ul class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">m(t)</span>: 调制信号，通常规定为|m(t)| ≤ 1</li>
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">μ<sub>a</sub></span>: 调幅指数，0 ≤ μ<sub>a</sub> ≤ 1，表示调制深度</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">AM调制波形演示</h3>
                    <div class="relative bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
                        <canvas id="amModulationChart" class="w-full" height="300"></canvas>
                    </div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="amFrequency" class="block text-sm font-medium mb-1">调制信号频率 (Hz)</label>
                            <input type="range" id="amFrequency" min="1" max="10" value="2" class="w-full accent-blue-500">
                        </div>
                        <div>
                            <label for="amModIndex" class="block text-sm font-medium mb-1">调制指数 (0-1)</label>
                            <input type="range" id="amModIndex" min="0" max="100" value="70" step="1" class="w-full accent-blue-500">
                        </div>
                        <div>
                            <button id="toggleAMPlay" class="mt-4 bg-blue-600 dark:bg-blue-700 hover:bg-blue-700 dark:hover:bg-blue-600 text-white py-2 px-4 rounded-md transition-colors w-full">
                                <i class="fas fa-play mr-2"></i>播放/暂停
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-plus-circle text-green-500 mr-2"></i>优点
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>电路简单，易于实现</li>
                            <li>接收机设计简单</li>
                            <li>抗噪声性能适中</li>
                            <li>适合远距离传输</li>
                            <li>可用于广播系统（如AM广播）</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-minus-circle text-red-500 mr-2"></i>缺点
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>功率效率低（大部分功率集中在载波上）</li>
                            <li>频带利用率低（双边带占用两倍基带带宽）</li>
                            <li>易受幅度噪声干扰</li>
                            <li>音质一般，还原度有限</li>
                            <li>非线性失真较严重</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4">AM的改进型</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-blue-600 dark:text-blue-400 mb-3">双边带抑制载波 (DSB-SC)</h4>
                            <p class="text-sm">抑制载波成分，仅保留双边带，提高了功率效率。</p>
                            <p class="text-sm mt-2">数学表达式：</p>
                            <p class="text-center my-2" id="dsb-formula">s_{DSB}(t) = A_c m(t)\cos(2\pi f_c t)</p>
                        </div>
                        
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-blue-600 dark:text-blue-400 mb-3">单边带 (SSB)</h4>
                            <p class="text-sm">仅传输一个边带，进一步提高频带利用率。</p>
                            <p class="text-sm mt-2">数学表达式（上边带）：</p>
                            <p class="text-center my-2" id="ssb-formula">s_{SSB}(t) = A_c m(t)\cos(2\pi f_c t) \pm \hat{m}(t)\sin(2\pi f_c t)</p>
                        </div>
                        
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-blue-600 dark:text-blue-400 mb-3">残留边带 (VSB)</h4>
                            <p class="text-sm">传输完整一个边带和另一个边带的一部分，是SSB的折中方案。</p>
                            <p class="text-sm mt-2">特点：</p>
                            <ul class="text-sm list-disc list-inside">
                                <li>避免了SSB对低频分量的损失</li>
                                <li>相比DSB节省了频带</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 频率调制 -->
        <section id="frequency-modulation" class="mb-16 animate-fade-in scroll-mt-24" style="animation-delay: 0.5s;">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-md">
                <h2 class="text-3xl font-bold mb-6 text-purple-600 dark:text-purple-400">频率调制 (FM)</h2>
                
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">原理与数学表达</h3>
                    <p class="mb-4">频率调制是指根据调制信号m(t)的变化来改变载波瞬时频率的调制方式。</p>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg mb-6">
                        <p class="font-medium mb-3">FM调制信号的瞬时频率表示为：</p>
                        <p class="text-center mb-4" id="fm-freq-formula">f_i(t) = f_c + k_f m(t)</p>
                        <p class="font-medium mb-3">FM调制信号可表示为：</p>
                        <p class="text-center mb-4" id="fm-formula">s_{FM}(t) = A_c\cos[2\pi f_c t + 2\pi k_f \int_{-\infty}^{t} m(\tau)d\tau]</p>
                        <p class="mb-2">其中：</p>
                        <ul class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">k<sub>f</sub></span>: 频率偏移常数，单位Hz/V</li>
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">∫m(τ)dτ</span>: 调制信号的积分</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
                        <h4 class="font-medium mb-3">调频指数</h4>
                        <p class="mb-3">调频指数β定义为载波最大频偏与调制信号最高频率之比：</p>
                        <p class="text-center mb-4" id="fm-beta-formula">\beta = \frac{\Delta f}{f_m}</p>
                        <p>其中，Δf = k<sub>f</sub>A<sub>m</sub>为最大频偏，f<sub>m</sub>为调制信号的最高频率。</p>
                        <p class="mt-3">根据β的大小，可分为：</p>
                        <ul class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm mt-3">
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">窄带FM</span>: β &lt;&lt; 1，频谱特性类似AM</li>
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">宽带FM</span>: β &gt; 1，频谱展宽，但抗噪性能更好</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">FM调制波形演示</h3>
                    <div class="relative bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
                        <canvas id="fmModulationChart" class="w-full" height="300"></canvas>
                    </div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="fmFrequency" class="block text-sm font-medium mb-1">调制信号频率 (Hz)</label>
                            <input type="range" id="fmFrequency" min="1" max="10" value="2" class="w-full accent-purple-500">
                        </div>
                        <div>
                            <label for="fmModIndex" class="block text-sm font-medium mb-1">调制指数 β</label>
                            <input type="range" id="fmModIndex" min="1" max="20" value="5" class="w-full accent-purple-500">
                        </div>
                        <div>
                            <button id="toggleFMPlay" class="mt-4 bg-purple-600 dark:bg-purple-700 hover:bg-purple-700 dark:hover:bg-purple-600 text-white py-2 px-4 rounded-md transition-colors w-full">
                                <i class="fas fa-play mr-2"></i>播放/暂停
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-plus-circle text-green-500 mr-2"></i>优点
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>抗干扰能力强（特别是对幅度干扰）</li>
                            <li>信噪比高（可提高15-30dB）</li>
                            <li>音质高，还原度好</li>
                            <li>功率效率高（恒定包络特性）</li>
                            <li>可进行预加重和去加重处理进一步提高性能</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-minus-circle text-red-500 mr-2"></i>缺点
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>频带宽度大（尤其宽带FM）</li>
                            <li>接收机结构复杂</li>
                            <li>存在捕获效应（场强低于阈值时性能急剧下降）</li>
                            <li>受频率干扰影响</li>
                            <li>不适合远距离传输（如短波通信）</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4">FM的典型应用</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-purple-600 dark:text-purple-400 mb-3">FM广播 (88-108MHz)</h4>
                            <p class="text-sm">宽带FM应用，音质高，立体声传输。</p>
                            <ul class="text-sm list-disc list-inside mt-2">
                                <li>最大频偏：±75kHz</li>
                                <li>音频带宽：15kHz</li>
                            </ul>
                        </div>
                        
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-purple-600 dark:text-purple-400 mb-3">调频对讲机</h4>
                            <p class="text-sm">窄带FM应用，频带利用率高。</p>
                            <ul class="text-sm list-disc list-inside mt-2">
                                <li>最大频偏：±2.5kHz ~ ±5kHz</li>
                                <li>信道间隔：12.5kHz或25kHz</li>
                            </ul>
                        </div>
                        
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-purple-600 dark:text-purple-400 mb-3">卫星通信</h4>
                            <p class="text-sm">抗干扰性强，适合空间信道传输。</p>
                            <ul class="text-sm list-disc list-inside mt-2">
                                <li>频率控制精度高</li>
                                <li>抗多径衰落效果好</li>
                                <li>适合数字信号调制</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 相位调制 -->
        <section id="phase-modulation" class="mb-16 animate-fade-in scroll-mt-24" style="animation-delay: 0.6s;">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-md">
                <h2 class="text-3xl font-bold mb-6 text-indigo-600 dark:text-indigo-400">相位调制 (PM)</h2>
                
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">原理与数学表达</h3>
                    <p class="mb-4">相位调制是指根据调制信号m(t)的变化来改变载波瞬时相位的调制方式。</p>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg mb-6">
                        <p class="font-medium mb-3">PM调制信号可表示为：</p>
                        <p class="text-center mb-4" id="pm-formula">s_{PM}(t) = A_c\cos[2\pi f_c t + k_p m(t)]</p>
                        <p class="mb-2">其中：</p>
                        <ul class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">k<sub>p</sub></span>: 相位灵敏度常数，单位rad/V</li>
                            <li class="bg-white dark:bg-gray-700 p-3 rounded-md shadow-sm"><span class="font-semibold">m(t)</span>: 调制信号</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-900/30 dark:to-purple-900/30 p-4 rounded-lg">
                        <h4 class="font-medium mb-3">PM与FM的关系</h4>
                        <p class="mb-3">PM与FM有密切关系，两者可通过微分和积分相互转换：</p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div class="bg-white dark:bg-gray-700 p-3 rounded-md">
                                <p class="font-medium mb-2">从FM得到PM：</p>
                                <p class="text-center">PM[m(t)] = FM[∫m(t)dt]</p>
                            </div>
                            <div class="bg-white dark:bg-gray-700 p-3 rounded-md">
                                <p class="font-medium mb-2">从PM得到FM：</p>
                                <p class="text-center">FM[m(t)] = PM[d/dt m(t)]</p>
                            </div>
                        </div>
                        <p class="mt-4">因此，相位调制和频率调制在实现上可以相互转换，但调制结果有所不同。</p>
                    </div>
                </div>
                
                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">PM调制波形演示</h3>
                    <div class="relative bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg">
                        <canvas id="pmModulationChart" class="w-full" height="300"></canvas>
                    </div>
                    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="pmFrequency" class="block text-sm font-medium mb-1">调制信号频率 (Hz)</label>
                            <input type="range" id="pmFrequency" min="1" max="10" value="2" class="w-full accent-indigo-500">
                        </div>
                        <div>
                            <label for="pmModIndex" class="block text-sm font-medium mb-1">调制指数 (rad)</label>
                            <input type="range" id="pmModIndex" min="1" max="50" value="15" class="w-full accent-indigo-500">
                        </div>
                        <div>
                            <button id="togglePMPlay" class="mt-4 bg-indigo-600 dark:bg-indigo-700 hover:bg-indigo-700 dark:hover:bg-indigo-600 text-white py-2 px-4 rounded-md transition-colors w-full">
                                <i class="fas fa-play mr-2"></i>播放/暂停
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-plus-circle text-green-500 mr-2"></i>优点
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>与FM类似的抗幅度干扰能力</li>
                            <li>恒定包络特性，适合非线性功率放大</li>
                            <li>对高频分量具有天然预加重效应</li>
                            <li>适合数字相位调制（如BPSK、QPSK等）</li>
                            <li>便于实现多相位调制，提高频谱效率</li>
                        </ul>
                    </div>
                    
                    <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4 flex items-center">
                            <i class="fas fa-minus-circle text-red-500 mr-2"></i>缺点
                        </h3>
                        <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                            <li>对高频分量敏感（相对于FM）</li>
                            <li>接收机复杂度较高</li>
                            <li>需要相位参考，同步要求高</li>
                            <li>频谱扩展与FM类似，占用带宽较大</li>
                            <li>对非线性失真较敏感</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8">
                    <h3 class="text-xl font-semibold mb-4">数字相位调制技术</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-indigo-600 dark:text-indigo-400 mb-3">二相相移键控 (BPSK)</h4>
                            <p class="text-sm">每个符号携带1比特信息。</p>
                            <div class="mt-3 bg-gray-100 dark:bg-gray-600 rounded-lg p-3 text-center">
                                <p class="text-xs mb-1">相位值：0° 和 180°</p>
                                <div class="w-24 h-24 mx-auto bg-white dark:bg-gray-700 rounded-full relative">
                                    <div class="absolute w-full h-full">
                                        <div class="w-1 h-12 bg-indigo-500 absolute top-0 left-1/2 -ml-0.5"></div>
                                        <div class="w-1 h-12 bg-red-500 absolute bottom-0 left-1/2 -ml-0.5"></div>
                                    </div>
                                </div>
                                <p class="text-xs mt-2">频谱效率：1 bit/s/Hz</p>
                            </div>
                        </div>
                        
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-indigo-600 dark:text-indigo-400 mb-3">四相相移键控 (QPSK)</h4>
                            <p class="text-sm">每个符号携带2比特信息。</p>
                            <div class="mt-3 bg-gray-100 dark:bg-gray-600 rounded-lg p-3 text-center">
                                <p class="text-xs mb-1">相位值：45°, 135°, 225°, 315°</p>
                                <div class="w-24 h-24 mx-auto bg-white dark:bg-gray-700 rounded-full relative">
                                    <div class="absolute w-full h-full">
                                        <div class="w-1 h-12 bg-indigo-500 absolute top-0 left-1/2 -ml-0.5 rotate-45 origin-bottom"></div>
                                        <div class="w-1 h-12 bg-green-500 absolute top-0 left-1/2 -ml-0.5 -rotate-45 origin-bottom"></div>
                                        <div class="w-1 h-12 bg-red-500 absolute bottom-0 left-1/2 -ml-0.5 rotate-45 origin-top"></div>
                                        <div class="w-1 h-12 bg-yellow-500 absolute bottom-0 left-1/2 -ml-0.5 -rotate-45 origin-top"></div>
                                    </div>
                                </div>
                                <p class="text-xs mt-2">频谱效率：2 bit/s/Hz</p>
                            </div>
                        </div>
                        
                        <div class="card-hover bg-white dark:bg-gray-700 p-5 rounded-lg shadow-sm">
                            <h4 class="font-semibold text-indigo-600 dark:text-indigo-400 mb-3">八相相移键控 (8PSK)</h4>
                            <p class="text-sm">每个符号携带3比特信息。</p>
                            <div class="mt-3 bg-gray-100 dark:bg-gray-600 rounded-lg p-3 text-center">
                                <p class="text-xs mb-1">相位值：8个均匀分布的相位</p>
                                <div class="w-24 h-24 mx-auto bg-white dark:bg-gray-700 rounded-full relative">
                                    <!-- 简化的8PSK示意图 -->
                                    <div class="absolute w-full h-full">
                                        <div class="w-0.5 h-12 bg-indigo-500 absolute top-0 left-1/2 -ml-0.5"></div>
                                        <div class="w-0.5 h-12 bg-indigo-300 absolute top-0 left-1/2 -ml-0.5 rotate-45 origin-bottom"></div>
                                        <div class="w-0.5 h-12 bg-indigo-300 absolute top-0 left-1/2 -ml-0.5 -rotate-45 origin-bottom"></div>
                                        <div class="w-0.5 h-12 bg-red-500 absolute bottom-0 left-1/2 -ml-0.5"></div>
                                        <div class="w-0.5 h-12 bg-red-300 absolute bottom-0 left-1/2 -ml-0.5 rotate-45 origin-top"></div>
                                        <div class="w-0.5 h-12 bg-red-300 absolute bottom-0 left-1/2 -ml-0.5 -rotate-45 origin-top"></div>
                                        <div class="w-0.5 h-12 bg-yellow-500 absolute top-1/2 -mt-0.5 left-0"></div>
                                        <div class="w-0.5 h-12 bg-green-500 absolute top-1/2 -mt-0.5 right-0"></div>
                                    </div>
                                </div>
                                <p class="text-xs mt-2">频谱效率：3 bit/s/Hz</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 调制技术比较 -->
        <section class="mb-16 animate-fade-in" style="animation-delay: 0.7s;">
            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/30 dark:to-indigo-900/30 p-8 rounded-2xl shadow-md">
                <h2 class="text-3xl font-bold mb-8 text-center">调制技术对比</h2>
                
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white dark:bg-gray-800 rounded-lg overflow-hidden">
                        <thead class="bg-gray-100 dark:bg-gray-700">
                            <tr>
                                <th class="px-6 py-4 text-left font-medium">特性</th>
                                <th class="px-6 py-4 text-center font-medium text-blue-600 dark:text-blue-400">幅度调制 (AM)</th>
                                <th class="px-6 py-4 text-center font-medium text-purple-600 dark:text-purple-400">频率调制 (FM)</th>
                                <th class="px-6 py-4 text-center font-medium text-indigo-600 dark:text-indigo-400">相位调制 (PM)</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200 dark:divide-gray-700">
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">基本表达式</td>
                                <td class="px-6 py-4 text-center">A(1+μm(t))cosω<sub>c</sub>t</td>
                                <td class="px-6 py-4 text-center">Acos(ω<sub>c</sub>t+k<sub>f</sub>∫m(t)dt)</td>
                                <td class="px-6 py-4 text-center">Acos(ω<sub>c</sub>t+k<sub>p</sub>m(t))</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">调制参数</td>
                                <td class="px-6 py-4 text-center">载波振幅</td>
                                <td class="px-6 py-4 text-center">载波瞬时频率</td>
                                <td class="px-6 py-4 text-center">载波瞬时相位</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">带宽需求</td>
                                <td class="px-6 py-4 text-center">2B<sub>m</sub> (双边带)</td>
                                <td class="px-6 py-4 text-center">≈2(β+1)B<sub>m</sub> (卡森公式)</td>
                                <td class="px-6 py-4 text-center">与FM类似，但与m(t)波形有关</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">功率效率</td>
                                <td class="px-6 py-4 text-center text-red-500">低 (⅓功率用于信息传输)</td>
                                <td class="px-6 py-4 text-center text-green-500">高 (全部功率用于传输)</td>
                                <td class="px-6 py-4 text-center text-green-500">高 (全部功率用于传输)</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">抗噪性能</td>
                                <td class="px-6 py-4 text-center text-yellow-500">中等</td>
                                <td class="px-6 py-4 text-center text-green-500">优 (尤其对幅度噪声)</td>
                                <td class="px-6 py-4 text-center text-green-500">优 (但对高频分量更敏感)</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">接收机复杂度</td>
                                <td class="px-6 py-4 text-center text-green-500">简单</td>
                                <td class="px-6 py-4 text-center text-red-500">复杂</td>
                                <td class="px-6 py-4 text-center text-red-500">复杂</td>
                            </tr>
                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors">
                                <td class="px-6 py-4 font-medium">主要应用</td>
                                <td class="px-6 py-4 text-center">AM广播、远距离通信</td>
                                <td class="px-6 py-4 text-center">FM广播、无线对讲、卫星通信</td>
                                <td class="px-6 py-4 text-center">数字通信(PSK)、相干通信系统</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="mt-10 bg-white dark:bg-gray-800 p-5 rounded-lg shadow-sm">
                    <h3 class="text-xl font-semibold mb-4 text-center">调制选择考量因素</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-medium mb-3 flex items-center">
                                <i class="fas fa-check-circle text-green-500 mr-2"></i>应用场景考虑
                            </h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                                <li>长距离通信：AM较适合</li>
                                <li>需要高保真度：FM/PM更胜一筹</li>
                                <li>移动通信：FM/数字调制更适合</li>
                                <li>高速数据传输：数字相位调制效率高</li>
                                <li>卫星通信：FM/PM抗干扰能力强</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-medium mb-3 flex items-center">
                                <i class="fas fa-sliders-h text-blue-500 mr-2"></i>技术参数考虑
                            </h4>
                            <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300">
                                <li>频谱资源有限：AM/SSB带宽较小</li>
                                <li>抗干扰要求高：FM/PM较好</li>
                                <li>设备复杂度限制：AM设备简单</li>
                                <li>功率效率要求高：FM/PM较好</li>
                                <li>信噪比要求高：宽带FM较好</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 思考题 -->
        <section class="mb-16 animate-fade-in" style="animation-delay: 0.8s;">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-2xl shadow-md">
                <h2 class="text-3xl font-bold mb-6 flex items-center">
                    <i class="fas fa-brain text-pink-500 mr-3"></i>深入思考
                </h2>
                
                <div class="space-y-6">
                    <div class="bg-pink-50 dark:bg-pink-900/20 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4">思考题 1：调制的本质</h3>
                        <p class="mb-4">从信号处理角度思考，调制的本质是什么？频域角度如何解释调制过程？</p>
                        <div class="mt-2 flex justify-end">
                            <button class="text-pink-600 dark:text-pink-400 hover:text-pink-700 dark:hover:text-pink-300 transition-colors" onclick="toggleAnswer('answer1')">
                                显示/隐藏参考答案 <i class="fas fa-chevron-down ml-1" id="arrow1"></i>
                            </button>
                        </div>
                        <div id="answer1" class="hidden mt-3 bg-white dark:bg-gray-700 p-4 rounded-md">
                            <p class="text-gray-700 dark:text-gray-300">
                                调制的本质是将基带信号的频谱搬移到载频附近的频带上。从频域角度看，调制是一种频谱搬移过程：
                            </p>
                            <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700 dark:text-gray-300">
                                <li>对于AM调制，在频域中表现为基带信号谱与冲击函数的卷积，结果是基带信号谱复制到±f<sub>c</sub>处</li>
                                <li>对于FM/PM调制，由于非线性特性，频谱展宽，产生无限多的边带分量，实际带宽由调制指数决定</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4">思考题 2：调制与编码</h3>
                        <p class="mb-4">调制与编码有何区别与联系？在现代通信系统中，两者如何协同工作？</p>
                        <div class="mt-2 flex justify-end">
                            <button class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 transition-colors" onclick="toggleAnswer('answer2')">
                                显示/隐藏参考答案 <i class="fas fa-chevron-down ml-1" id="arrow2"></i>
                            </button>
                        </div>
                        <div id="answer2" class="hidden mt-3 bg-white dark:bg-gray-700 p-4 rounded-md">
                            <p class="text-gray-700 dark:text-gray-300">
                                调制与编码的区别与联系：
                            </p>
                            <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700 dark:text-gray-300">
                                <li>区别：编码处理信息本身，目标是提高传输效率和可靠性；调制将编码后的信号转换为适合信道传输的形式</li>
                                <li>联系：在数字通信中常结合使用，如TCM（格栅码调制）将编码和调制融为一体</li>
                                <li>协同工作：源编码压缩数据、信道编码增加冗余抗干扰、调制匹配信道特性，共同优化端到端性能</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg">
                        <h3 class="text-xl font-semibold mb-4">思考题 3：未来调制技术</h3>
                        <p class="mb-4">结合5G和未来6G通信需求，调制技术面临哪些新挑战和发展趋势？</p>
                        <div class="mt-2 flex justify-end">
                            <button class="text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 transition-colors" onclick="toggleAnswer('answer3')">
                                显示/隐藏参考答案 <i class="fas fa-chevron-down ml-1" id="arrow3"></i>
                            </button>
                        </div>
                        <div id="answer3" class="hidden mt-3 bg-white dark:bg-gray-700 p-4 rounded-md">
                            <p class="text-gray-700 dark:text-gray-300">
                                未来调制技术的挑战与趋势：
                            </p>
                            <ul class="list-disc list-inside mt-2 space-y-1 text-gray-700 dark:text-gray-300">
                                <li>高阶调制：1024QAM及更高阶调制，提高频谱效率，但对信道质量要求更高</li>
                                <li>自适应调制编码：根据信道状态动态调整调制方式和码率</li>
                                <li>新型波形：NOMA、FBMC、UFMC等非正交多址技术，提高多用户容量</li>
                                <li>空间调制：利用多天线系统，如空间调制(SM)和空间移位键控(SSK)，增加空间维度</li>
                                <li>智能反射面辅助调制：利用可编程电磁表面优化无线环境</li>
                                <li>量子调制：面向未来量子通信的新型调制方式</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-100 dark:bg-gray-800 py-8 mt-16">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div>
                    <h2 class="text-xl font-bold text-gray-800 dark:text-white mb-2">通信原理</h2>
                    <p class="text-gray-600 dark:text-gray-300">信号调制技术</p>
                </div>
                <div class="mt-4 md:mt-0">
                    <p class="text-gray-500 dark:text-gray-400">© IECUBE Tutorial 2025</p>
                    <p class="text-xs text-gray-400 dark:text-gray-500 mt-2">本内容为人工智能生成，观点为转述原作者，不代表本公司立场，仅供参考和批判</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // 深色模式切换
        const themeToggle = document.getElementById('theme-toggle');
        
        // 检查系统偏好
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        themeToggle.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
        });
        
        // 数学公式渲染
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "$", right: "$", display: false}
                ]
            });
        });
        
        // KaTeX 手动渲染
        function renderFormula(elementId, formula) {
            const element = document.getElementById(elementId);
            if (element) {
                katex.render(formula, element, {
                    throwOnError: false,
                    displayMode: true
                });
            }
        }
        
        // 渲染所有公式
        renderFormula('carrier-formula', 'c(t) = A_c\\cos(2\\pi f_c t + \\phi_c)');
        renderFormula('am-formula', 's_{AM}(t) = A_c[1 + \\mu_a m(t)]\\cos(2\\pi f_c t)');
        renderFormula('dsb-formula', 's_{DSB}(t) = A_c m(t)\\cos(2\\pi f_c t)');
        renderFormula('ssb-formula', 's_{SSB}(t) = A_c m(t)\\cos(2\\pi f_c t) \\pm \\hat{m}(t)\\sin(2\\pi f_c t)');
        renderFormula('fm-freq-formula', 'f_i(t) = f_c + k_f m(t)');
        renderFormula('fm-formula', 's_{FM}(t) = A_c\\cos[2\\pi f_c t + 2\\pi k_f \\int_{-\\infty}^{t} m(\\tau)d\\tau]');
        renderFormula('fm-beta-formula', '\\beta = \\frac{\\Delta f}{f_m}');
        renderFormula('pm-formula', 's_{PM}(t) = A_c\\cos[2\\pi f_c t + k_p m(t)]');
        
        // 思考题切换
        function toggleAnswer(id) {
            const answer = document.getElementById(id);
            const arrowId = id.replace('answer', 'arrow');
            const arrow = document.getElementById(arrowId);
            
            answer.classList.toggle('hidden');
            if (!answer.classList.contains('hidden')) {
                arrow.classList.replace('fa-chevron-down', 'fa-chevron-up');
            } else {
                arrow.classList.replace('fa-chevron-up', 'fa-chevron-down');
            }
        }
        
        // AM调制可视化
        let amAnimationId = null;
        let amPlaying = false;
        const amCanvas = document.getElementById('amModulationChart');
        const amCtx = amCanvas.getContext('2d');
        const amFreqSlider = document.getElementById('amFrequency');
        const amModIndexSlider = document.getElementById('amModIndex');
        const amPlayBtn = document.getElementById('toggleAMPlay');
        
        function drawAMModulation() {
            const width = amCanvas.width;
            const height = amCanvas.height;
            amCtx.clearRect(0, 0, width, height);
            
            const modFreq = parseFloat(amFreqSlider.value);
            const modIndex = parseFloat(amModIndexSlider.value) / 100;
            const carrierFreq = 20;
            
            // 时间
            const time = Date.now() / 1000;
            
            // 绘制坐标轴
            amCtx.strokeStyle = '#ccc';
            amCtx.beginPath();
            amCtx.moveTo(0, height/2);
            amCtx.lineTo(width, height/2);
            amCtx.stroke();
            
            // 绘制调制信号
            amCtx.beginPath();
            amCtx.strokeStyle = '#3b82f6';
            for (let x = 0; x < width; x++) {
                const t = x / width * 2 * Math.PI + time * modFreq;
                const modValue = Math.sin(modFreq * t);
                const y = (1 - modValue) * height/4 + height/8;
                if (x === 0) {
                    amCtx.moveTo(x, y);
                } else {
                    amCtx.lineTo(x, y);
                }
            }
            amCtx.stroke();
            
            // 绘制AM调制信号
            amCtx.beginPath();
            amCtx.strokeStyle = '#9333ea';
            for (let x = 0; x < width; x++) {
                const t = x / width * 2 * Math.PI + time * modFreq;
                const modValue = Math.sin(modFreq * t);
                const carrier = Math.cos(carrierFreq * t);
                const modulated = (1 + modIndex * modValue) * carrier;
                const y = (-modulated / 2) * height/3 + height/1.5;
                if (x === 0) {
                    amCtx.moveTo(x, y);
                } else {
                    amCtx.lineTo(x, y);
                }
            }
            amCtx.stroke();
            
            // 绘制标签
            amCtx.font = '12px Arial';
            amCtx.fillStyle = '#3b82f6';
            amCtx.fillText('调制信号 m(t)', 10, 30);
            amCtx.fillStyle = '#9333ea';
            amCtx.fillText('AM调制信号 s(t)', 10, height/1.5 - 80);
            
            if (amPlaying) {
                amAnimationId = requestAnimationFrame(drawAMModulation);
            }
        }
        
        amFreqSlider.addEventListener('input', drawAMModulation);
        amModIndexSlider.addEventListener('input', drawAMModulation);
        amPlayBtn.addEventListener('click', function() {
            amPlaying = !amPlaying;
            if (amPlaying) {
                drawAMModulation();
            } else {
                cancelAnimationFrame(amAnimationId);
            }
        });
        
        // FM调制可视化
        let fmAnimationId = null;
        let fmPlaying = false;
        const fmCanvas = document.getElementById('fmModulationChart');
        const fmCtx = fmCanvas.getContext('2d');
        const fmFreqSlider = document.getElementById('fmFrequency');
        const fmModIndexSlider = document.getElementById('fmModIndex');
        const fmPlayBtn = document.getElementById('toggleFMPlay');
        
        function drawFMModulation() {
            const width = fmCanvas.width;
            const height = fmCanvas.height;
            fmCtx.clearRect(0, 0, width, height);
            
            const modFreq = parseFloat(fmFreqSlider.value);
            const modIndex = parseFloat(fmModIndexSlider.value);
            const carrierFreq = 20;
            
            // 时间
            const time = Date.now() / 1000;
            
            // 绘制坐标轴
            fmCtx.strokeStyle = '#ccc';
            fmCtx.beginPath();
            fmCtx.moveTo(0, height/2);
            fmCtx.lineTo(width, height/2);
            fmCtx.stroke();
            
            // 绘制调制信号
            fmCtx.beginPath();
            fmCtx.strokeStyle = '#3b82f6';
            for (let x = 0; x < width; x++) {
                const t = x / width * 2 * Math.PI + time * modFreq;
                const modValue = Math.sin(modFreq * t);
                const y = (1 - modValue) * height/4 + height/8;
                if (x === 0) {
                    fmCtx.moveTo(x, y);
                } else {
                    fmCtx.lineTo(x, y);
                }
            }
            fmCtx.stroke();
            
            // 绘制FM调制信号
            fmCtx.beginPath();
            fmCtx.strokeStyle = '#9333ea';
            for (let x = 0; x < width; x++) {
                const t = x / width * 2 * Math.PI + time * modFreq;
                const modValue = Math.sin(modFreq * t);
                // 积分，这里用相位变化来模拟
                const phaseChange = modIndex * modValue;
                const modulated = Math.cos(carrierFreq * t + phaseChange);
                const y = (-modulated / 2) * height/3 + height/1.5;
                if (x === 0) {
                    fmCtx.moveTo(x, y);
                } else {
                    fmCtx.lineTo(x, y);
                }
            }
            fmCtx.stroke();
            
            // 绘制标签
            fmCtx.font = '12px Arial';
            fmCtx.fillStyle = '#3b82f6';
            fmCtx.fillText('调制信号 m(t)', 10, 30);
            fmCtx.fillStyle = '#9333ea';
            fmCtx.fillText('FM调制信号 s(t)', 10, height/1.5 - 80);
            
            if (fmPlaying) {
                fmAnimationId = requestAnimationFrame(drawFMModulation);
            }
        }
        
        fmFreqSlider.addEventListener('input', drawFMModulation);
        fmModIndexSlider.addEventListener('input', drawFMModulation);
        fmPlayBtn.addEventListener('click', function() {
            fmPlaying = !fmPlaying;
            if (fmPlaying) {
                drawFMModulation();
            } else {
                cancelAnimationFrame(fmAnimationId);
            }
        });
        
        // PM调制可视化
        let pmAnimationId = null;
        let pmPlaying = false;
        const pmCanvas = document.getElementById('pmModulationChart');
        const pmCtx = pmCanvas.getContext('2d');
        const pmFreqSlider = document.getElementById('pmFrequency');
        const pmModIndexSlider = document.getElementById('pmModIndex');
        const pmPlayBtn = document.getElementById('togglePMPlay');
        
        function drawPMModulation() {
            const width = pmCanvas.width;
            const height = pmCanvas.height;
            pmCtx.clearRect(0, 0, width, height);
            
            const modFreq = parseFloat(pmFreqSlider.value);
            const modIndex = parseFloat(pmModIndexSlider.value) / 10; // 调整为合适的范围
            const carrierFreq = 20;
            
            // 时间
            const time = Date.now() / 1000;
            
            // 绘制坐标轴
            pmCtx.strokeStyle = '#ccc';
            pmCtx.beginPath();
            pmCtx.moveTo(0, height/2);
            pmCtx.lineTo(width, height/2);
            pmCtx.stroke();
            
            // 绘制调制信号
            pmCtx.beginPath();
            pmCtx.strokeStyle = '#3b82f6';
            for (let x = 0; x < width; x++) {
                const t = x / width * 2 * Math.PI + time * modFreq;
                const modValue = Math.sin(modFreq * t);
                const y = (1 - modValue) * height/4 + height/8;
                if (x === 0) {
                    pmCtx.moveTo(x, y);
                } else {
                    pmCtx.lineTo(x, y);
                }
            }
            pmCtx.stroke();
            
            // 绘制PM调制信号
            pmCtx.beginPath();
            pmCtx.strokeStyle = '#6366f1';
            for (let x = 0; x < width; x++) {
                const t = x / width * 2 * Math.PI + time * modFreq;
                const modValue = Math.sin(modFreq * t);
                const modulated = Math.cos(carrierFreq * t + modIndex * modValue);
                const y = (-modulated / 2) * height/3 + height/1.5;
                if (x === 0) {
                    pmCtx.moveTo(x, y);
                } else {
                    pmCtx.lineTo(x, y);
                }
            }
            pmCtx.stroke();
            
            // 绘制标签
            pmCtx.font = '12px Arial';
            pmCtx.fillStyle = '#3b82f6';
            pmCtx.fillText('调制信号 m(t)', 10, 30);
            pmCtx.fillStyle = '#6366f1';
            pmCtx.fillText('PM调制信号 s(t)', 10, height/1.5 - 80);
            
            if (pmPlaying) {
                pmAnimationId = requestAnimationFrame(drawPMModulation);
            }
        }
        
        pmFreqSlider.addEventListener('input', drawPMModulation);
        pmModIndexSlider.addEventListener('input', drawPMModulation);
        pmPlayBtn.addEventListener('click', function() {
            pmPlaying = !pmPlaying;
            if (pmPlaying) {
                drawPMModulation();
            } else {
                cancelAnimationFrame(pmAnimationId);
            }
        });
        
        // 初始绘制所有图表
        window.addEventListener('DOMContentLoaded', function() {
            drawAMModulation();
            drawFMModulation();
            drawPMModulation();
        });
        
        // 页面滚动效果，延迟动画显示
        document.addEventListener('DOMContentLoaded', function() {
            const animElements = document.querySelectorAll('.animate-fade-in');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.opacity = '1';
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1
            });
            
            animElements.forEach(el => {
                el.style.opacity = '0';
                observer.observe(el);
            });
        });
    </script>
</body>
</html>